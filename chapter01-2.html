<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Amazing Mapper</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter01.html"><strong aria-hidden="true">1.</strong> Meet the Dream Maker</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter01-1.html"><strong aria-hidden="true">1.1.</strong> Hello World!</a></li><li class="chapter-item expanded "><a href="chapter01-2.html" class="active"><strong aria-hidden="true">1.2.</strong> The Amazing Mapper</a></li><li class="chapter-item expanded "><a href="chapter01-3.html"><strong aria-hidden="true">1.3.</strong> Help is on the way!</a></li></ol></li><li class="chapter-item expanded "><a href="chapter02.html"><strong aria-hidden="true">2.</strong> Navigating the Code Tree</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter02-1.html"><strong aria-hidden="true">2.1.</strong> Formatting Code</a></li><li class="chapter-item expanded "><a href="chapter02-2.html"><strong aria-hidden="true">2.2.</strong> Compilation Errors</a></li><li class="chapter-item expanded "><a href="chapter02-3.html"><strong aria-hidden="true">2.3.</strong> Paths in the Tree</a></li><li class="chapter-item expanded "><a href="chapter02-4.html"><strong aria-hidden="true">2.4.</strong> Code Comments</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-amazing-mapper" id="the-amazing-mapper">The Amazing Mapper</a></h1>
<p>For most programs, adding graphic support is a massive chore.  The
facilities in Dream Maker, however, make this task quite simple.  For our
example, we'll just draw a couple of icons and put them on a map.</p>
<ol>
<ol>
<li>
<p>Create a project called <code>maze</code> through the <strong>New
Environment...</strong> option.</p>
</li>
<li>
<p>Create the main <code>maze.dm</code> file, and enter the following code:</p>
<p>turf
floor
icon = 'floor.dmi' 
wall
icon = 'wall.dmi'
density = 1
mob
icon = 'player.dmi'</p>
</li>
<li>
<p>Build the <code>floor.dmi</code> icon.  Do this by selecting <strong>New
File...</strong> and choosing <strong>Icon File</strong> for the type.  This will bring up a
new window, with the option to build pixmaps (static, directionless, icons)
and movies (animated or directional icons).  Choose <strong>New Pixmap...</strong>
from the <strong>Graphic</strong> menu and show off your artistic flair by drawing a
picture of a floor.  Repeat this step for the <code>wall.dmi</code> and
<code>player.dmi</code> icons.</p>
</li>
<li>
<p>With the three icons in place, the project should compile.  Test this
by selecting the <strong>Compile</strong> option.  If it is successful, you should
be able to see your icons in the object tree tab on the left-hand side of
the screen.  This tree illustrates the objects defined in your world.</p>
</li>
<li>
<p>You can run the world now, but you won't see any icons because you
haven't put any objects on the map yet.  To build a map, again select
<strong>New File...</strong> and choose <strong>Map File</strong>.  You can name it whatever
you'd like; the <code>.dmm</code> extension will be appended, indicating that
this file is a map.</p>
</li>
<li>
<p>Now for the fun part!  Create the map by selecting objects from the
tree and placing them with the various functions.  For example, to add a row
of walls, select the <strong>Add</strong> function on the map pane, click on the
<code>wall</code> tile in the tree (it's underneath <code>turf</code>), and draw them on
the map by left-clicking the mouse.  You can remove tiles by
right-clicking.  The map editor has considerable functionality; you can
learn about it by reading the included documentation.</p>
</li>
<li>
<p>Compile the new, graphical project and run it with Dream Seeker.  If
all goes well, you should see your creation on screen.  Your avatar can roam
the floors and bump into the walls.  Not too bad for a couple minutes of
work!</p>
</li>
</ol>
<hr />
<p>The reason we did not have to set the density of the floor to 0 is that the
default density of a turf is 0.  Since the floor is derived from a turf, it
inherits all the default properties of one.  This sort of inheritance of
characteristics is one of the important elements of object-oriented
languages like DM.  Ultimately, it is just a compact way of describing
closely related things.
Before you test this example, you will need to design the icons and the maze
itself.  Fortunately, this process is a natural part of Dream Maker's
functionality.</p>
<p>When you are done making the map, you can compile and test the world.  When
you log in, you should be able to walk around in the maze you designed by
using the arrow keys.  Amazing!</p>
<p>Of course there are always small details that one doesn't think about until
after the fact.  For example, where is the starting point in the maze?  We
never specified, so players are just dumped onto the map in the first
available spot.  Here is one way to do it:</p>
<pre><code>turf
   floor
      icon = 'floor.dmi'
   start
      icon = 'start.dmi'
   wall
      icon = 'wall.dmi'
      density = 1
mob
   icon = 'player.dmi'
   Login()
      loc = locate(/turf/start)
</code></pre>
<p>You will have to make a new icon for the <code>start</code> turf and then edit the
map to mark the starting position with it.</p>
<p>The code that makes the initial placement of the mob is in the
<code>Login</code> proc.  It sets the location of the mob (<code>loc</code>) to the
position of the start turf.  This is done by using the <code>locate()</code>
instruction--one of the many built-in procedures in DM. It computes the position of an object type (in this
case, the <code>start</code> turf).</p>
<p>Notice how the object type <code>/turf/start</code> is specified.  This notation is
called a <strong>type path</strong> because of the way you specify the path (starting
from the root) down to the specific type of object you want.</p>
<p>Now suppose you forgot to put a start turf on the map.  What would happen?
The <code>locate()</code> instruction would fail and the player would not get
placed on the map and therefore wouldn't even be able to see the maze after
logging in.  A total disaster!  Wouldn't it be nice to fall back on the
default behavior of at least putting the mob somewhere on the map?  In other
words, we have to somehow run the default <code>Login</code> proc as well as the
one we defined, just in case there is no start turf.  Here is how to do it:</p>
<pre><code>mob
   Login()
      loc = locate(/turf/start)
      ..()
</code></pre>
<p>The final line does the job.  It invokes a procedure with a strange name:
just two dots.  That is the name DM uses for the default procedure, more
generally known as the parent or super procedure.  In the case of
<code>Login</code>, the default proc checks to see if the mob is somewhere
already.  If not, it finds a vacant spot on the map, which is just what we
wanted.</p>
<p>Now you can begin to see the general flavor of DM programming.  There are a
number of events (<code>Login</code> being one) which are handled by
procedures.  When necessary, you can override the default procedure with one
of your own to make things work exactly how you want.</p>
<p>This is another important component of object oriented programming.  Each
type of object can respond to events differently.  The way in which they
respond is inherited from their parents by default, but can be redefined
and augmented as needed.</p>
<p>This introduction has just scratched the surface of DM.  You should begin to
see some interesting possibilities.  At the same time, you should have a lot
of unanswered questions.  Keep both of those in mind; they will be your
guide through the more detailed exploration of the language that follows.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="chapter01-1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="chapter01-3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="chapter01-1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="chapter01-3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
